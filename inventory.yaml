# This is an example inventory.yaml
# To read more about inventory files, see https://pup.pt/bolt-inventory
#
# groups:
#   - name: linux
#     targets:
#       - target1.example.com
#       - target2.example.com
#     config:
#       transport: ssh
#       ssh:
#         private-key: /path/to/private_key.pem
#   - name: windows
#     targets:
#       - name: win1
#         uri: target3.example.com
#       - name: win2
#         uri: target4.example.com
#     config:
#       transport: winrm
# config:
#   ssh:
#     host-key-check: false
#   winrm:
#     user: Administrator
#     password: Bolt!
#     ssl: false
groups:
  - name: nagios-kms-web
    targets: 
    - _plugin: aws_inventory
      region: ap-southeast-1
      filters:
        - name: tag:type
          values: [nagios-kms-web]
      target_mapping:
          name: private_ip_address
          uri: public_ip_address
          config:
            ssh:
              host: public_ip_address
    config:
      ssh:
        user: centos
        private-key: "./ssh-key/kms.pem"
        host-key-check: false
        run-as: root
  - name: nagios-kms-nrpe
    targets: 
    - _plugin: aws_inventory
      region: ap-southeast-1
      filters:
        - name: tag:type
          values: [nagios-kms-nrpe]
      target_mapping:
          name: private_ip_address
          uri: public_ip_address
          config:
            ssh:
              host: public_ip_address
    config:
      ssh:
        user: centos
        private-key: "./ssh-key/kms.pem"
        host-key-check: false
        run-as: root
        